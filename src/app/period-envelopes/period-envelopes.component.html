<div style="margin: 10px 0">
    <mat-expansion-panel>
        <mat-expansion-panel-header>
            <mat-panel-title>
                This is the expansion title
            </mat-panel-title>
            <mat-panel-description>
                <b>This is a summary of the content</b>
            </mat-panel-description>
        </mat-expansion-panel-header>

        <p>This is the primary content of the panel.</p>

    </mat-expansion-panel>
</div>

<div fxLayout="row" fxLayout.xs="column" fxLayoutWrap>
    <div *ngFor="let envelope of envelopes" class="envelopeImaged" [style.background-image]="envelope.background" fxFlex="282px"
        fxFlex.xs="200px">
        <div fxLayout="column" fxLayoutAlign="space-between stretch" style="height: 100%">
            <table class="envelopeTop">
                <tr>
                    <td [ngClass]="envelope.nameClass">
                        <div>{{ envelope.Name }}</div>
                    </td>
                    <td class="currentAmount" [ngClass]="envelope.currentAmountClass" *ngIf="envelope.CurrentAmount">
                        <b>{{ envelope.CurrentAmount | money }}</b>
                    </td>
                </tr>
            </table>

            <div *ngIf="envelope.TargetAmount" class="completePercent" fxFlexAlign="center">
                <span title="Необходимая сумма - {{ envelope.TargetAmount | money }}">{{ envelope.completePercentStr }}</span>
            </div>

            <div>
                <div *ngIf="envelope.allPlansForShow">
                    <div fxLayout="row" fxLayoutWrap fxLayoutAlign="{{ envelope.allPlansAlign }}">
                        <div *ngFor="let plan of envelope.allPlansForShow" [ngClass]="plan.cssClass">
                            <span class="planDate">
                                {{ plan.ActionDate | date:'dd.MM' }}:
                            </span>{{ plan.PlanAmount | money }}
                        </div>
                    </div>
                    <div fxLayout="row" fxLayoutAlign="{{ envelope.allPlansAlign }}">
                        <div (click)="showHideAllPlans(envelope, envelope.firstPlanIn)" class="envelopePlansSum">
                            <span class="planDate">
                                Всего:
                            </span>{{ envelope.allPlansSum | money }}
                        </div>
                    </div>
                </div>

                <div fxLayout="row" fxLayoutAlign="space-between center" *ngIf="!envelope.allPlansForShow">
                    <div (click)="showHideAllPlans(envelope, envelope.firstPlanIn)">
                        <div *ngIf="envelope.firstPlanIn" [ngClass]="envelope.firstPlanIn.cssClass">
                            <span class="planDate">
                                {{ envelope.firstPlanIn.ActionDate | date:'dd.MM' }}:
                            </span>+{{ envelope.firstPlanIn.PlanAmount | money }}
                        </div>
                    </div>
                    <div (click)="showHideAllPlans(envelope, envelope.firstPlanOut)">
                        <div *ngIf="envelope.firstPlanOut" [ngClass]="envelope.firstPlanOut.cssClass">
                            <span class="planDate">
                                {{ envelope.firstPlanOut.ActionDate | date:'dd.MM' }}:
                            </span>-{{ envelope.firstPlanOut.PlanAmount | money }}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>